<div *ngIf="hike" class="grid two" style="gap:1rem;">
  <div class="card elevated">
    <img [src]="hike.images?.[0] || 'assets/placeholder.png'"
         (error)="onImgError($event)"
         style="width:100%; height:260px; object-fit:cover; border-radius:8px;" />
    <div id="map" class="mt-3"></div>
  </div>

  <div>
    <h1 style="font-size:1.5rem; font-weight:700;">{{ hike.title }}</h1>
    <div class="text-sm text-muted mb-2">{{ hike.distanceKm }} km • {{ hike.difficulty | titlecase }}</div>
    <div class="text-sm text-muted">Owner: <a [routerLink]="['/profile', hike.ownerId]">{{ hike.ownerName || '—' }}</a></div>
    <p class="mb-3" style="white-space:pre-line">{{ hike.description }}</p>

    <div class="row">
      <tm-like-button
        [liked]="liked"
        [count]="hike.likes?.length || 0"
        (toggle)="toggleLike()"></tm-like-button>

      <a *ngIf="isOwnerOrAdmin" [routerLink]="['/edit', hike._id]" class="btn warn">Edit</a>
    </div>
  </div>
</div>

<section class="mt-4">
  <h2 class="mb-2">Comments</h2>
  <tm-comment-list [hikeId]="hike?._id"></tm-comment-list>
</section>
